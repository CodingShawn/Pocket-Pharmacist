{"version":3,"sources":["utils/utils.js","components/DisplayResults.js","services/therapeuticProductsListing.js","components/Loading.js","components/SearchForm.js","components/Header.js","components/Footer.js","App.js","index.js"],"names":["parseString","string","replace","replaceAmpersand","substring","length","removeQuotations","toUpperCase","DisplayResults","results","searchTerm","parsedRows","map","result","index","id","row","Object","keys","forEach","key","title","data","columns","name","label","options","display","resizableColumns","filter","rowsPerPage","rowsPerPageOptions","responsive","selectableRows","textLabels","body","noMatch","BASE_URL","therapeuticProductsListingService","searchViaField","searchField","a","request","params","q","axios","get","response","records","getDrug","searchViaProductName","searchViaActiveIngredient","concat","Loading","useState","rotation","setRotation","updateRotation","timer","setTimeout","clearTimer","clearTimeout","useEffect","targetClass","document","getElementById","style","transform","rotateHourGlass","color","padding","SearchForm","setResults","setSearchTerm","isLoading","setIsLoading","drugName","setDrugName","onSubmit","event","preventDefault","saveResultsToState","TextField","type","onChange","target","value","required","IconButton","Header","Footer","d","Date","todayDate","getDate","getMonth","getFullYear","attribution","href","App","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.ae0b31b2.chunk.js","sourcesContent":["// API returns JSON in following format: {\n//   \"_id\": 4791,\n//   \"license_holder\": \"\\\"GALDERMA SINGAPORE PRIVATE LIMITED\\\"\",\n//   \"atc_code\": \"D10AD53\",\n//   \"approval_date\": \"21/4/2010\",\n//   \"rank\": 0,\n//   \"forensic_classification\": \"Prescription Only\",\n//   \"active_ingredients\": \"\\\"Adapalene&&Benzoyl peroxide\\\"\",\n//   \"strength\": \"\\\"0.10%&&2.50%\\\"\",\n//   \"_full_count\": \"5\",\n//   \"country_of_manufacturer\": \"\\\"FRANCE\\\"\",\n//   \"route_of_administration\": \"TOPICAL\",\n//   \"licence_no\": \"SIN13789P\",\n//   \"product_name\": \"\\\"EPIDUO GEL 0.1%/2.5%\\\"\",\n//   \"manufacturer\": \"\\\"LABORATOIRES GALDERMA\\\"\",\n//   \"dosage_form\": \"\\\"GEL\\\"\"\n// }\n// Need to parse strings accordingly\n\nfunction removeQuotations(string) {\n  // As quotations are always the first and last char, to simply remove those chars\n  return string.substring(1, string.length - 1);\n}\n\nfunction replaceAmpersand(string) {\n  return string.replace(/&&/g, \", \");\n}\n\nfunction parseString(string) {\n  return replaceAmpersand(removeQuotations(string)).toUpperCase();\n}\n\n// For testing with jest\n// module.exports = {\n//   removeQuotations,\n//   replaceAmpersand,\n//   parseString,\n// };\n\nexport default parseString;\n","import MUIDataTable from \"mui-datatables\";\nimport parseString from \"../utils/utils\";\n\nfunction DisplayResults({ results, searchTerm }) {\n  const rows = results.map((result, index) => {\n    return { ...result, id: index };\n  });\n\n  const parsedRows = rows.map((row) => {\n    Object.keys(row).forEach(function (key) {\n      if (typeof row[key] === \"string\" && key !== \"forensic_classification\") {\n        row[key] = parseString(row[key]);\n      }\n    });\n    return row;\n  });\n\n  const columns = [\n    {\n      name: \"product_name\",\n      label: \"Product Name\",\n    },\n    {\n      name: \"active_ingredients\",\n      label: \"Active Ingredients\",\n    },\n    {\n      name: \"strength\",\n      label: \"Strength\",\n    },\n    {\n      name: \"dosage_form\",\n      label: \"Dosage Form\",\n    },\n    {\n      name: \"forensic_classification\",\n      label: \"Forensic Classification\",\n      options: {\n        display: false,\n      },\n    },\n    {\n      name: \"manufacturer\",\n      label: \"Manufacturer\",\n      options: {\n        display: false,\n      },\n    },\n    {\n      name: \"country_of_manufacturer\",\n      label: \"Country of Manufacturer\",\n      options: {\n        display: false,\n      },\n    },\n  ];\n\n  return (\n    <MUIDataTable\n      title={`Search Results for \"${searchTerm}\"`}\n      data={parsedRows}\n      columns={columns}\n      options={{\n        resizableColumns: true,\n        filter: false,\n        rowsPerPage: 20,\n        rowsPerPageOptions: [20, 50],\n        responsive: \"standard\",\n        selectableRows: \"none\",\n        textLabels: {\n          body: {\n            noMatch: \"No records found. Please check if you have spelt the name correctly.\"\n          }\n        }\n      }\n    }\n    />\n  );\n}\n\nexport default DisplayResults;\n","import axios from \"axios\";\n\nconst BASE_URL =\n  \"https://data.gov.sg/api/action/datastore_search?resource_id=3ee20559-372d-42f0-bde9-245e21f7f39b\";\n\nconst therapeuticProductsListingService = {};\n\ntherapeuticProductsListingService.getDrug = async function getDrug(searchTerm) {\n  const searchViaProductName = await searchViaField(\"product_name\", searchTerm);\n  const searchViaActiveIngredient = await searchViaField(\n    \"active_ingredients\",\n    searchTerm\n  );\n  const response = searchViaActiveIngredient.concat(searchViaProductName);\n  return response;\n};\n\nasync function searchViaField(searchField, searchTerm) {\n  const request = {\n    params: {\n      q: { [searchField]: searchTerm },\n    },\n  };\n  const response = await axios.get(BASE_URL, request);\n  const { records } = response.data.result;\n  return records;\n}\n\nexport default therapeuticProductsListingService;\n","import { useEffect, useState } from \"react\";\nimport HourglassEmptyIcon from \"@material-ui/icons/HourglassEmpty\";\n\nfunction Loading() {\n  const [rotation, setRotation] = useState(0);\n\n  function rotateHourGlass() {\n    const targetClass = document.getElementById(\"rotating\");\n    if (targetClass) {\n      targetClass.style.transform = `rotate(${rotation}deg)`;\n    }\n  }\n\n  function updateRotation() {\n    rotation < 315 ? setRotation(rotation + 45) : setRotation(0);\n  }\n\n  function timer() {\n    setTimeout(updateRotation, 250);\n  }\n\n  function clearTimer() {\n    clearTimeout(timer);\n  }\n\n  useEffect(() => {\n    timer();\n    return clearTimer;\n  });\n\n  useEffect(() => {\n    rotateHourGlass();\n    // eslint-disable-next-line\n  }, [rotation]);\n\n  return (\n    <HourglassEmptyIcon id=\"rotating\" style={{ color: \"rgba(0,0,0,0.54)\", padding: \"12px\" }} />\n  );\n}\n\nexport default Loading;\n","import therapeuticProductsListingService from \"../services/therapeuticProductsListing\";\nimport TextField from \"@material-ui/core/TextField\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Loading from \"../components/Loading\";\nimport { useState } from \"react\";\n\nfunction SearchForm({ setResults, setSearchTerm }) {\n  const [isLoading, setIsLoading] = useState(false);\n  const [drugName, setDrugName] = useState(\"\");\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    setIsLoading(true);\n    saveResultsToState();\n    setSearchTerm(drugName);\n  }\n\n  async function saveResultsToState() {\n    let results = await therapeuticProductsListingService.getDrug(drugName);\n    setResults(results);\n    setIsLoading(false);\n  }\n\n  return (\n    <section>\n      <form onSubmit={handleSubmit} id=\"search-form\">\n        {!isLoading && (\n          <>\n            <TextField\n              label=\"Drug / Product Name\"\n              type=\"search\"\n              onChange={({ target }) => setDrugName(target.value)}\n              value={drugName}\n              required\n            />\n            <IconButton type=\"submit\">\n              <SearchIcon />\n            </IconButton>\n          </>\n        )}\n        {isLoading && <Loading />}\n      </form>\n    </section>\n  );\n}\n\nexport default SearchForm;\n","function Header() {\n  return (\n    <header>\n      <h1 id=\"header\">Pocket Pharmacist</h1>\n    </header>\n  );\n}\n\nexport default Header;\n","function Footer() {\n  const months = [\n    \"January\",\n    \"February\",\n    \"March\",\n    \"April\",\n    \"May\",\n    \"June\",\n    \"July\",\n    \"August\",\n    \"September\",\n    \"October\",\n    \"November\",\n    \"December\",\n  ];\n  const d = new Date();\n  let todayDate = `${d.getDate()} ${months[d.getMonth()]} ${d.getFullYear()}`;\n  let attribution = `* Contains information from Listing of Registered Therapeutic Products accessed on ${todayDate} from Health Sciences Authority which is made available under the terms of the`;\n\n  return (\n    <footer id=\"footer\">\n      <div>\n        {attribution}{\" \"}\n        <a href=\"https://data.gov.sg/open-data-licence\">\n          Singapore Open Data Licence version 1.0\n        </a>\n      </div>\n      <div>\n        ** Data retrieved may be outdated. Refer to{\" \"}\n        <a href=\"http://eservice.hsa.gov.sg/prism/common/enquirepublic/SearchDRBProduct.do?action=load\">\n          HSA website\n        </a>{\" \"}\n        for latest list of health products\n      </div>\n    </footer>\n  );\n}\n\nexport default Footer;\n","import { useState } from \"react\";\nimport DisplayResults from \"./components/DisplayResults\";\nimport SearchForm from \"./components/SearchForm\";\nimport Header from \"./components/Header\";\nimport Footer from \"./components/Footer\";\nimport \"./components.css\";\n\nfunction App() {\n  const [results, setResults] = useState(null);\n  const [searchTerm, setSearchTerm] = useState(\"\");\n\n  return (\n    <>\n      <Header />\n      <SearchForm setResults={setResults} setSearchTerm={setSearchTerm} />\n      {results && <DisplayResults results={results} searchTerm={searchTerm} />}\n      <Footer />\n    </>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}